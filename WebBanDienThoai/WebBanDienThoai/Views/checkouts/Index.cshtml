@model List<WebBanDienThoai.Models.CartModel>
@{
    Layout = null;
}


@if (Session["CartItem"] != null)
{

    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="flexbox">
    <head>
        <link rel="shortcut icon" href="//theme.hstatic.net/1000197181/1000253506/14/favicon.png?v=1662" type="image/png" />
        <title>
            Thanh toán đơn hàng
        </title>
        <link href="~/Content/ShopPage/css/checkouts.css" rel="stylesheet" />
        <script src='../js/jquery.min.js' type='text/javascript'></script>
        <script src='../js/jquery.validate.js' type='text/javascript'></script>

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, user-scalable=no">
    </head>
    <body>
        <div class="banner">
            <div class="wrap">
                <a href="/" class="logo">
                    <h1 class="logo-text">T&N Shop</h1>
                </a>
            </div>
        </div>

        <div class="content">
            <div class="wrap">
                <div class="sidebar">
                    <div class="sidebar-content">
                        <div class="order-summary order-summary-is-collapsed">
                            <h2 class="details-order">Thông tin đơn hàng (@Model.Count sản phẩm) </h2>
                            <div class="order-summary-sections">
                                <div class="order-summary-section order-summary-section-product-list" data-order-summary-section="line-items">
                                    <table class="product-table">

                                        <tbody>


                                            @foreach (var item in Model)
                                            {

                                                <tr class="product" data-product-id="@item.Product.ProductID" data-variant-id="@item.Product.ProductID">
                                                    <td class="product-image">
                                                        <div class="product-thumbnail">
                                                            <div class="product-thumbnail-wrapper">
                                                                <img class="product-thumbnail-image" alt="@item.Product.ProductName" src="@item.Product.Images" />
                                                            </div>
                                                            <span class="product-thumbnail-quantity" aria-hidden="true">@item.Quanlity</span>
                                                        </div>
                                                    </td>
                                                    <td class="product-description">
                                                        <span class="product-description-name order-summary-emphasis">@item.Product.ProductName</span>
                                                    </td>
                                                    <td class="product-quantity visually-hidden">@item.Quanlity</td>
                                                    <td class="product-price">
                                                        <span class="order-summary-emphasis">@String.Format("{0:0,0₫}", item.Product.Price * item.Quanlity)</span>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>


                                    </table>
                                </div>

                                <div class="order-summary-section order-summary-section-total-lines">
                                    <table class="total-line-table">

                                        <tfoot class="total-line-table-footer">
                                            @if (Session["Discount"] != null)
                                            {
                                                <tr class="total-line">



                                                    <td class="total-line-name payment-due-label">
                                                        <span class="payment-due-label-total">Giảm giá</span>
                                                    </td>
                                                    <td class="total-line-name payment-due">
                                                        <span class="payment-due-price" data-totalmoney="">
                                                            @String.Format("{0:0,0₫}", (Decimal)Session["Discount"])
                                                        </span>
                                                    </td>


                                                </tr>
                                                <tr class="total-line">

                                                    <td class="total-line-name payment-due-label">
                                                        <span class="payment-due-label-total">Tổng cộng</span>
                                                    </td>
                                                    <td class="total-line-name payment-due">
                                                        <span class="payment-due-price" data-totalmoney="@Model.Sum(x => x.Product.Price * x.Quanlity)">
                                                            @String.Format("{0:0,0₫}", Model.Sum(x => x.Product.Price * x.Quanlity) - (Decimal)Session["Discount"])
                                                        </span>
                                                    </td>
                                                </tr>
                                            }
                                            else
                                            {
                                                <tr class="total-line">

                                                    <td class="total-line-name payment-due-label">
                                                        <span class="payment-due-label-total">Tổng cộng</span>
                                                    </td>
                                                    <td class="total-line-name payment-due">
                                                        <span class="payment-due-price" data-totalmoney="@Model.Sum(x => x.Product.Price * x.Quanlity)">
                                                            @String.Format("{0:0,0₫}", Model.Sum(x => x.Product.Price * x.Quanlity))
                                                        </span>
                                                    </td>
                                                </tr>
                                            }
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="main">
                    <div class="main-header">
                        <a href="/" class="logo">
                            <h1 class="logo-text">T&N Shop</h1>
                        </a>
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="/cart">Giỏ hàng</a>
                            </li>
                            <li class="breadcrumb-item breadcrumb-item-current">
                                Thông tin đặt hàng
                            </li>
                        </ul>
                    </div>

                    @using (Html.BeginForm("AddOrderDetails", "checkouts", FormMethod.Post))
                    {
                        <div class="main-content">
                            <div class="step">
                                <div class="step-sections " step="1">
                                    <div class="section">
                                        <div class="section-header">
                                            <h2 class="section-title">Thông tin giao hàng</h2>
                                        </div>
                                        <div class="section-content section-customer-information no-mb">
                                            @foreach (var item in ViewBag.customer)
                                            {

                                                <div class="fieldset">
                                                    <div class="field   ">
                                                        <label class="field-label" for="billing_address_full_name">Họ và tên: </label>
                                                        <div class="field-input-wrapper">

                                                            <input placeholder="Họ và tên" readonly autocapitalize="off" spellcheck="false" required class="field-input" size="30" type="text" id="customerName" name="customerID" value=" @item.customerName" />
                                                        </div>
                                                    </div>
                                                    <div class="field  field-two-thirds  ">
                                                        <label class="field-label" for="checkout_user_email">Email</label>
                                                        <div class="field-input-wrapper">

                                                            <input placeholder="Email" readonly rautocapitalize="off" required spellcheck="false" class="field-input" size="30" type="email" id="Email" name="Email" value="@item.Email" />
                                                        </div>
                                                    </div>
                                                    <div class="field field-required field-third  ">
                                                        <label class="field-label" for="billing_address_phone">Số điện thoại:</label>
                                                        <div class="field-input-wrapper">

                                                            <input placeholder="Số điện thoại" readonly required autocapitalize="off" spellcheck="false" class="field-input" size="30" maxlength="11" type="tel" id="Phone" name="Phone" value="@item.Phone" />
                                                        </div>
                                                    </div>
                                                    <div class="field   ">
                                                        <label class="field-label" for="billing_address_address1">Địa chỉ:</label>
                                                        <div class="field-input-wrapper">

                                                            <input placeholder="Địa chỉ" readonly required autocapitalize="off" Address spellcheck="false" class="field-input" size="30" type="text" id="Address" name="Address" value="@item.Address" />
                                                        </div>
                                                    </div>
                                                    <a href="/Customers/Index"> Thay đổi thông tin</a>

                                                    <input type="hidden" name="TotalProduct" value="@Model.Sum(x => x.Product.Price * x.Quanlity)" />
                                                </div>
                                            }
                                        </div>


                                        <div id="apply_voucher">
                                            <div class="section-header">
                                                <h2 class="section-title">Mã khuyến mại</h2>
                                            </div>


                                            @Html.ActionLink("Chọn mã khuyến mại ?", "VoucherAvailable", "Account")


                                        </div>


                                        <div id="change_pick_location_or_shipping">



                                            <div id="section-payment-method" class="section">
                                                <div class="section-header">
                                                    <h2 class="section-title">Phương thức vận chuyển</h2>
                                                </div>
                                                <div class="section-content">
                                                    <div class="content-box">



                                                        @foreach (var item in ViewBag.payment)
                                                        {

                                                            if (item.PaymentID == 1)
                                                            {
                                                                <div class="radio-wrapper content-box-row">
                                                                    <label class="radio-label" for="PaymentID_@item.PaymentID">
                                                                        <div class="radio-input" for="PaymentID_@item.PaymentID">
                                                                            <input id="PaymentID_@item.PaymentID" class="input-radio" checked name="PaymentID" type="radio" value="@item.PaymentID">
                                                                        </div>
                                                                        <span class="radio-label-primary">@item.PaymentName</span>
                                                                    </label>
                                                                </div>

                                                            }
                                                            else
                                                            {
                                                                <div class="radio-wrapper content-box-row">
                                                                    <label class="radio-label" for="PaymentID_@item.PaymentID">
                                                                        <div class="radio-input" for="PaymentID_@item.PaymentID">
                                                                            <input id="PaymentID_@item.PaymentID" class="input-radio" name="PaymentID" type="radio" value="@item.PaymentID">
                                                                        </div>
                                                                        <span class="radio-label-primary">@item.PaymentName</span>
                                                                    </label>
                                                                </div>
                                                            }

                                                        }

                                                    </div>
                                                </div>
                                            </div>

                                        </div>







                                    </div>
                                </div>
                                <div class="step-footer">


                                    <input name="utf8" type="hidden" value="✓">
                                    <button type="submit" class="step-footer-continue-btn btn" id="abc" style="margin-left:20px">
                                        <span class="btn-content">Đặt ngay</span>
                                        <i class="btn-spinner icon icon-button-spinner"></i>
                                    </button>

                                    @*<input name="utf8" type="hidden" value="✓">
                                        <a type="submit" class="step-footer-continue-btn btn" href="@Url.Action("Payment", "checkouts")" id="def">
                                            <span class="btn-content">Thanh Toán</span>
                                            <i class="btn-spinner icon icon-button-spinner"></i>
                                        </a>*@

                                    <input name="utf8" type="hidden" value="✓">
                                    <a type="submit" class="step-footer-continue-btn btn" href="@Url.Action("AddOrderDetails2", "checkouts")" id="abc">
                                        <span class="btn-content">Thanh Toán</span>
                                        <i class="btn-spinner icon icon-button-spinner"></i>
                                    </a>





                                    <a class="step-footer-previous-link" href="/cart">
                                        Quay về Giỏ hàng
                                    </a>
                                </div>
                            </div>
                        </div>

                    }

                    <div class="main-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

}
else
{
<script>
    window.location.href = "/cart";
</script>


}
















@*@model List<WebBanDienThoai.Models.CartModel>
    @{
        Layout = null;
    }


    @if (Session["CartItem"] != null)
    {

        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="flexbox">
        <head>
            <link rel="shortcut icon" href="//theme.hstatic.net/1000197181/1000253506/14/favicon.png?v=1662" type="image/png" />
            <title>
                Thanh toán đơn hàng
            </title>
            <link href="~/Content/ShopPage/css/checkouts.css" rel="stylesheet" />
            <script src='../js/jquery.min.js' type='text/javascript'></script>
            <script src='../js/jquery.validate.js' type='text/javascript'></script>

            <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, user-scalable=no">
        </head>
        <body>
            <div class="banner">
                <div class="wrap">
                    <a href="/" class="logo">
                        <h1 class="logo-text">T&N Shop</h1>
                    </a>
                </div>
            </div>

            <div class="content">
                <div class="wrap">
                    <div class="sidebar">
                        <div class="sidebar-content">
                            <div class="order-summary order-summary-is-collapsed">
                                <h2 class="details-order">Thông tin đơn hàng (@Model.Count sản phẩm) </h2>
                                <div class="order-summary-sections">
                                    <div class="order-summary-section order-summary-section-product-list" data-order-summary-section="line-items">
                                        <table class="product-table">

                                            <tbody>


                                                @foreach (var item in Model)
                                                {

                                                    <tr class="product" data-product-id="@item.Product.ProductID" data-variant-id="@item.Product.ProductID">
                                                        <td class="product-image">
                                                            <div class="product-thumbnail">
                                                                <div class="product-thumbnail-wrapper">
                                                                    <img class="product-thumbnail-image" alt="@item.Product.ProductName" src="@item.Product.Images" />
                                                                </div>
                                                                <span class="product-thumbnail-quantity" aria-hidden="true">@item.Quanlity</span>
                                                            </div>
                                                        </td>
                                                        <td class="product-description">
                                                            <span class="product-description-name order-summary-emphasis">@item.Product.ProductName</span>
                                                        </td>
                                                        <td class="product-quantity visually-hidden">@item.Quanlity</td>
                                                        <td class="product-price">
                                                            <span class="order-summary-emphasis">@String.Format("{0:0,0₫}", item.Product.Price * item.Quanlity)</span>
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>


                                        </table>
                                    </div>

                                    <div class="order-summary-section order-summary-section-total-lines">
                                        <table class="total-line-table">

                                            <tfoot class="total-line-table-footer">
                                                @if (Session["Discount"] != null)
                                                {
                                                    <tr class="total-line">



                                                        <td class="total-line-name payment-due-label">
                                                            <span class="payment-due-label-total">Giảm giá</span>
                                                        </td>
                                                        <td class="total-line-name payment-due">
                                                            <span class="payment-due-price" data-totalmoney="">
                                                                @String.Format("{0:0,0₫}", (Decimal)Session["Discount"])
                                                            </span>
                                                        </td>


                                                    </tr>
                                                    <tr class="total-line">

                                                        <td class="total-line-name payment-due-label">
                                                            <span class="payment-due-label-total">Tổng cộng</span>
                                                        </td>
                                                        <td class="total-line-name payment-due">
                                                            <span class="payment-due-price" data-totalmoney="@Model.Sum(x => x.Product.Price * x.Quanlity)">
                                                                @String.Format("{0:0,0₫}", Model.Sum(x => x.Product.Price * x.Quanlity) - (Decimal)Session["Discount"])
                                                            </span>
                                                        </td>
                                                    </tr>
                                                }
                                                else
                                                {
                                                    <tr class="total-line">

                                                        <td class="total-line-name payment-due-label">
                                                            <span class="payment-due-label-total">Tổng cộng</span>
                                                        </td>
                                                        <td class="total-line-name payment-due">
                                                            <span class="payment-due-price" data-totalmoney="@Model.Sum(x => x.Product.Price * x.Quanlity)">
                                                                @String.Format("{0:0,0₫}", Model.Sum(x => x.Product.Price * x.Quanlity))
                                                            </span>
                                                        </td>
                                                    </tr>
                                                }
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="main">
                        <div class="main-header">
                            <a href="/" class="logo">
                                <h1 class="logo-text">T&N Shop</h1>
                            </a>
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a href="/cart">Giỏ hàng</a>
                                </li>
                                <li class="breadcrumb-item breadcrumb-item-current">
                                    Thông tin đặt hàng
                                </li>
                            </ul>
                        </div>

                        @using (Html.BeginForm("AddOrderDetails", "checkouts", FormMethod.Post))
                        {
                            <div class="main-content">
                                <div class="step">
                                    <div class="step-sections " step="1">
                                        <div class="section">
                                            <div class="section-header">
                                                <h2 class="section-title">Thông tin giao hàng</h2>
                                            </div>
                                            <div class="section-content section-customer-information no-mb">
                                                @foreach (var item in ViewBag.customer)
                                                {

                                                    <div class="fieldset">
                                                        <div class="field   ">
                                                            <label class="field-label" for="billing_address_full_name">Họ và tên: </label>
                                                            <div class="field-input-wrapper">

                                                                <input placeholder="Họ và tên" readonly autocapitalize="off" spellcheck="false" required class="field-input" size="30" type="text" id="customerName" name="customerID" value=" @item.customerName" />
                                                            </div>
                                                        </div>
                                                        <div class="field  field-two-thirds  ">
                                                            <label class="field-label" for="checkout_user_email">Email</label>
                                                            <div class="field-input-wrapper">

                                                                <input placeholder="Email" readonly rautocapitalize="off" required spellcheck="false" class="field-input" size="30" type="email" id="Email" name="Email" value="@item.Email" />
                                                            </div>
                                                        </div>
                                                        <div class="field field-required field-third  ">
                                                            <label class="field-label" for="billing_address_phone">Số điện thoại:</label>
                                                            <div class="field-input-wrapper">

                                                                <input placeholder="Số điện thoại" readonly required autocapitalize="off" spellcheck="false" class="field-input" size="30" maxlength="11" type="tel" id="Phone" name="Phone" value="@item.Phone" />
                                                            </div>
                                                        </div>
                                                        <div class="field   ">
                                                            <label class="field-label" for="billing_address_address1">Địa chỉ:</label>
                                                            <div class="field-input-wrapper">

                                                                <input placeholder="Địa chỉ" readonly required autocapitalize="off" Address spellcheck="false" class="field-input" size="30" type="text" id="Address" name="Address" value="@item.Address" />
                                                            </div>
                                                        </div>
                                                        <a href="/Customers/Index"> Thay đổi thông tin</a>

                                                        <input type="hidden" name="TotalProduct" value="@Model.Sum(x => x.Product.Price * x.Quanlity)" />
                                                    </div>
                                                }
                                            </div>


                                        <div id="apply_voucher">
                                            <div class="section-header">
                                                <h2 class="section-title">Mã khuyến mại</h2>
                                            </div>


                                           @Html.ActionLink("Chọn mã khuyến mại ?", "VoucherAvailable","Account")


                                        </div>


                                            <div id="change_pick_location_or_shipping">



                                                <div id="section-payment-method" class="section">
                                                    <div class="section-header">
                                                        <h2 class="section-title">Phương thức thanh toán</h2>
                                                    </div>
                                                    <div class="section-content">
                                                        <div class="content-box">



                                                            @foreach (var item in ViewBag.payment)
                                                            {

                                                                if (item.PaymentID == 1)
                                                                {
                                                                    <div class="radio-wrapper content-box-row">
                                                                        <label class="radio-label" for="PaymentID_@item.PaymentID">
                                                                            <div class="radio-input" for="PaymentID_@item.PaymentID">
                                                                                <input id="PaymentID_@item.PaymentID" class="input-radio" checked name="PaymentID" type="radio" value="@item.PaymentID">
                                                                            </div>
                                                                            <span class="radio-label-primary">@item.PaymentName</span>
                                                                        </label>
                                                                    </div>

                                                                }
                                                                else
                                                                {
                                                        <div class="radio-wrapper content-box-row">
                                                            <label class="radio-label" for="PaymentID_@item.PaymentID">
                                                                <div class="radio-input" for="PaymentID_@item.PaymentID">
                                                                    <input id="PaymentID_@item.PaymentID" class="input-radio" checked name="PaymentID" type="radio" value="@item.PaymentID">
                                                                </div>
                                                                <span class="radio-label-primary">@item.PaymentName</span>
                                                            </label>
                                                        </div>
                                                                }

                                                            }

                                                        </div>
                                                    </div>
                                                </div>

                                            </div>







                                        </div>
                                    </div>
                                    <div class="step-footer">


                                                <input name="utf8" type="hidden" value="✓">
                                                <button type="submit" class="step-footer-continue-btn btn" id="abc">
                                                    <span class="btn-content">Đặt ngay</span>
                                                    <i class="btn-spinner icon icon-button-spinner"></i>
                                                </button>

                                                <input name="utf8" type="hidden" value="✓">
                                                <a type="submit" class="step-footer-continue-btn btn" href="@Url.Action("Payment", "checkouts")" id="def">
                                                    <span class="btn-content">Thanh Toán</span>
                                                    <i class="btn-spinner icon icon-button-spinner"></i>
                                                </a>





                                        <a class="step-footer-previous-link" href="/cart">
                                            Quay về Giỏ hàng
                                        </a>
                                    </div>
                                </div>
                            </div>

                        }

                        <div class="main-footer">
                        </div>
                    </div>
                </div>
            </div>
        </body>
    </html>

    }
    else
    {
    <script>
        window.location.href = "/cart";
    </script>


    }*@